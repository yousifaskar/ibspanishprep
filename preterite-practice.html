<!DOCTYPE html>

<html lang = "en">
    <head>
        <title>IAM Spanish</title>
        <link href = "navbar.css" rel="stylesheet">
        <link href = "dropdown.css" rel="stylesheet">
        <link href = "navbar.html" rel = "import">
        <link href = "fonts.css" rel = "stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <meta name = "viewport" content = "width = device-width, initial-scale = 1.0">
        <style>
            *{padding: 0; margin: 0; }
            canvas { background: #eee; display: block; margin: 0 auto; }
            body {
                background-image: url('retro.jpg');
                background-repeat: no repeat;
                background-attachment: fixed;
                background-size: cover;
            }
            .inputField {
                width: 100%;
                padding: 12px 20px;
            }
            .diffButton {
                background-color: black;
                width: 30%;
                height: 25%;
                margin-left: 40%;
                margin-right: 40%;
                font-size: 200%;
                font-family: 'Press Start 2P', cursive;
                color: red;
                margin: 50px;
            }
            .diffButton:hover {
                cursor: pointer;
                color: darkred;
            }
            .start2-btn {
                 text-align: center;
                display: inline-block;
                margin:5px;
                 font-size: 300%;
                 font-family: 'Press Start 2P', cursive;
                font-weight: bold;
                padding: 10px 0 10px 10px ;
                background-color: lightgray;
                text-shadow: -1px -1px black, 1px 1px white;
                color: gray;
                -webkit-border-radius: 7px;
                -moz-border-radius: 7px;
                -o-border-radius: 7px;
                border-radius: 7px;
                box-shadow: 0 0.4em gray; 
                cursor: pointer;
                padding: 30px;
            }
            .start2-btn:hover {
                background-color: #AAAAAA;
            }
        </style>
    </head>
    <body>
        <div class = "navbar">
            <a href = "index.html"><i class="fa fa-home"></i></a>
            <div class = "dropdown">
                <button class = "dropbtn">The Versus</button>
                <div class = "dropdown-content">
                    <a href = "ser-estar.html">Ser vs Estar</a>
                    <a href = "saber-conocer.html">Saber vs Conocer</a>
                    <a href = "por-para.html">Por vs Para</a>
                </div>
            </div>
            <div class = "dropdown">
                <button class = "dropbtn">Tense Practice</button>
                <div class = "dropdown-content">
                    <a href = "present-practice.html">Present</a>
                    <a href = "present-progressive-practice.html">Present Progressive</a>
                    <a href = "preterite-practice.html">Preterite</a>
                    <a href = "imperfect-practice.html">Imperfect</a>
                    <a href = "subjunctive-practice.html">Subjunctive Mood</a>
                    <a href = "perfect-practice.html">Perfect Tenses</a>
                    <a href = "future-conditional-practice.html">Future and Conditional</a>
                </div>
            </div>
            <div class = "dropdown">
                <button class = "dropbtn">Tense Conjugations</button>
                <div class = "dropdown-content">
                    <a href = "present-tense.html">Present</a>
                    <a href = "present-progressive-tense.html">Present Progressive</a>
                    <a href = "preterite-tense.html">Preterite</a>
                    <a href = "imperfect-tense.html">Imperfect</a>
                    <a href = "subjunctive-tense.html">Subjunctive Mood</a>
                    <a href = "perfect-tense.html">Perfect Tenses</a>
                    <a href = "future-conditional-tense.html">Future and Conditional</a>
                </div>
            </div>
        </div>
                     
        <div align = "center" style = "font-family: 'Press Start 2p', cursive; color: white;" id = "startButton">
            <h1 style = "margin: 20px">Gravity</h1>
            <h2>Type in the correct conjugation before it reaches the bottom of the screen!</h2><br/><br/><br/>
            <span onclick = "showLevels(); return false;" style = "width: 20%; height: 20%" class = "start2-btn">START</span>
        </div>
                     
        <div id = "levels" align = "center" style = "display: none; font-family: 'Press Start 2p', cursive">
            <button style = "color: lightskyblue"class = "diffButton" onclick = "startGame(0.8); return false">BEGINNER</button>
            <button style = "color: lightgreen" class = "diffButton" onclick = "startGame(1.6); return false">MEDIUM</button>
            <button style = "color: lightyellow" class = "diffButton" onclick = "startGame(3); return false">MR. WATKINS</button>
            <button style = "color: lightcoral" class = "diffButton" onclick = "startGame(6); return false">IMPOSSIBLE</button>
        </div>
                     
        <div id = "game" style = "display: none">      
            <canvas id = "myCanvas" width = "1365" height = "570"></canvas>
            <form autocomplete = "off" onsubmit = "check(); return false">
                <input style = "width: 100%; padding: 10px 20px; background-color: #ADD8E6;" type = "text" placeholder = "Type your answer here..." id = "result">
            </form>
            </body>
        </div>
                     
        <script>
            var
                canvas = document.getElementById("myCanvas"),
                ctx = canvas.getContext("2d"),
                brickLength = 120,
                yspeed = 1,
                score = 0,
                lives = 3,
                questions = [
                    [
                        'quiso',
                        'tuve',
                        'pusieron',
                        'vivimos',
                        'hiciste',
                        'dijo',
                        'estudiamos',
                        'pudo',
                        'estuve',
                        'vio',
                        'dio',
                        'fuimos',
                        'fueron'
                    ],
                    
                    [
                        'ella (querer)',
                        'Yo (tener)',
                        'Ustedes (poner)',
                        'Nosotros (vivir)',
                        'TÃº (hacer)',
                        'Usted (decir)',
                        'Nosotros (estudiar)',
                        'Ella (poder)',
                        'Yo (estar)',
                        'Usted (ver)',
                        'Ella (dar)',
                        'Nosotros (ir)',
                        'Ellos (ser)',
                    ],

                    [
                        32,
                        28,
                        47,
                        47,
                        28,
                        34,
                        59,
                        29,
                        28,
                        29,
                        28,
                        32,
                        29
                    ]
                ]

                // [x coordinate, y coordinate, writing, dx, dy, false = appears] //
                bricks = [
                    [0, 0, brickLength, 0,yspeed, false, '#FFFFFF'],
                    [170, 0, brickLength,2,yspeed, true, '#FFFFCC'],
                    [340, 0, brickLength,-2,yspeed, true, '#00FF00'],
                    [510, 0, brickLength,0,yspeed, true, '#FF0000'],
                    [540, 0, brickLength, 2.2, yspeed, true, '#ffaaee'],
                    [475, 0, brickLength, -1.8, yspeed, true, '#7fe5f0'],
                    [164, 0, brickLength, 2.2, yspeed, true, '#5ac18e'],
                    [270, 0, brickLength, -2.2, yspeed, true, '#ffa500'],
                    ],

                RNquestion = Math.floor(Math.random()*questions[0].length),
                RNblock = Math.floor(Math.random()*bricks.length);

            function drawBricks() {
                xcoord = bricks[RNblock][0];
                ycoord = bricks[RNblock][1];
                HandW = bricks[RNblock][2];
                color = bricks[RNblock][6];

                ctx.beginPath();
                ctx.rect(xcoord,ycoord,HandW,HandW);
                ctx.fillStyle = color;
                ctx.fill();
                ctx.closePath();
            }

            function drawLives() {
                ctx.beginPath();
                ctx.font = "16px Arial";
                ctx.fillStyle = "#0095DD";
                ctx.fillText("Lives: "+lives,(canvas.width - 75),20);
                ctx.closePath();
            }
                

            function drawQuestions() {
                question = questions[1][RNquestion];
                xmiddle = bricks[RNblock][0] + (brickLength/2) - questions[2][RNquestion];
                ymiddle = bricks[RNblock][1] + (brickLength/2);
                ctx.beginPath();
                ctx.font = "14px Arial";
                ctx.strokeStyle = "#000000";
                ctx.strokeText(question, xmiddle, ymiddle);
                ctx.closePath();
                
            }
                     
            function draw() {
                if (document.getElementById("game").style.display === "block") {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    drawScore();
                    drawLives();
                    drawBricks();
                    drawQuestions();
                    bricks[RNblock][0]+=bricks[RNblock][3];
                    bricks[RNblock][1]+=bricks[RNblock][4];
                    xcoord = bricks[RNblock][0];
                    ycoord = bricks[RNblock][1];

                    if ((xcoord<0) || (xcoord + brickLength>canvas.width)) {
                        bricks[RNblock][3] = -bricks[RNblock][3];
                    }
                    if (ycoord<0) {
                        bricks[RNblock][4] = -bricks[RNblock][4];
                    }
                    else if (ycoord + brickLength > canvas.height) {
                        lives--;
                        if (!lives) {
                            alert("GAME OVER: the answer was " + questions[0][RNquestion] + "!");
                            document.location.reload();
                        }
                        else {
                            bricks[RNblock][1] = 0;
                        }
                    }
                }
            }
                
            function startGame(x) {
                document.getElementById("levels").style.display = "none";
                for (var i = 0; i < bricks.length; i++) {
                    bricks[i][4] = x;
                }
                document.getElementById("game").style.display = "block";
                document.getElementById("result").focus();
            }

            function showLevels() {
                document.getElementById("startButton").style.display = "none";
                document.getElementById("levels").style.display = "block";
            }

            function drawScore() {
                ctx.beginPath();
                ctx.font = "16px Arial";
                ctx.fillStyle = "#0095DD";
                ctx.fillText("Score: "+score,8,20);
                ctx.closePath();
            }

            function check() {
                user = document.getElementById("result").value;
                user2 = user.toLowerCase();
                answer = questions[0][RNquestion];
                question = questions[1][RNquestion];
                if (user2 == answer) {
                    document.getElementById("result").style.backgroundColor = "#ADD8E6";
                    score++;
                    if (score == 13) {
                        alert("CONGRATULATIONS, YOU WON!");
                        document.location.reload();
                    }
                    questions[0].splice(RNquestion,1);
                    questions[1].splice(RNquestion,1);
                    questions[2].splice(RNquestion,1);
                    RNquestion = Math.floor(Math.random()*questions[0].length);
                    RNblock = Math.floor(Math.random()*bricks.length);
                    document.getElementById("result").value = "";
                    bricks[RNblock][1] = 0;
                }
                else {
                    document.getElementById("result").style.backgroundColor = "#FFAAAA";
                }
            }     
            setInterval(draw, 10);
        </script>
    </body>
</html>
